"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{4863:(e,t,r)=>{r.d(t,{R:()=>o});var a=r(5155);r(2115);let s={src:"/_next/static/media/splash.8475f43d.png"};function o(){return(0,a.jsx)("div",{className:"inset-0 absolute w-full items-center justify-center flex flex-col flex-grow h-full",children:(0,a.jsx)("img",{src:s.src,alt:"Warpcast Rewards splash screen image",className:"animate-pulse",style:{marginTop:"-".concat(88,"px")},width:88,height:88})})}},3984:(e,t,r)=>{r.d(t,{g$:()=>F,HI:()=>x,bv:()=>S,Xc:()=>q,zA:()=>b,yv:()=>T,_$:()=>C,MW:()=>E});var a=r(5906),s=r(6273),o=r(7882),i=r(2115);function n(e){let{defaults:t,options:r}=e,a={...t};for(let e in r)void 0!==r[e]&&(a[e]=r[e]);return a}let c=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed"]),d=e=>e instanceof Error;class l extends Error{constructor(e,{error:t}){super(e),this.error=t}}class u extends l{constructor(e){super(e.message,e),this.name="Farcaster API Error",this.absoluteUrl=e.absoluteUrl,this.body=e.body,this.endpointName=e.endpointName,this.hasTimedOut=e.hasTimedOut,this.isNetworkError=e.isNetworkError,this.method=e.method,this.relativeUrl=e.relativeUrl,this.resolvedTimeout=e.resolvedTimeout,this.response=e.response,this.responseData=e.responseData,this.status=e.status,this.timeout=e.timeout,this.isOffline=e.isOffline}}class h extends u{constructor(e){super(e),this.responseData=e.responseData,this.status=e.status}}let m=globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,y=()=>({baseUrl:"https://client.warpcast.com",fetch:m,readTimeout:2e4,mutateTimeout:2e4}),p=()=>{let e=()=>((1+Math.random())*65536|0).toString(16).substring(1);return"".concat(e()).concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class f{getDecayFactor(e,t){let r=Date.now(),a=t?"".concat(e,"?").concat(JSON.stringify(t)):e;this.lastResetTimes.has(a)||this.lastResetTimes.set(a,r);let s=this.lastResetTimes.get(a)||r;r-s>this.RESET_INTERVAL_MS&&(this.callCounts.delete(a),this.lastResetTimes.delete(a));let o=this.callCounts.get(a)||0;return this.callCounts.set(a,o+1),Math.max(1-o*this.decayFactor,this.decayFactor)}constructor(e=.3){this.callCounts=new Map,this.lastResetTimes=new Map,this.RESET_INTERVAL_MS=6e4,this.decayFactor=e}}class w{updateOptions(e){this.options=n({defaults:this.options,options:e})}async fetch(e,t){let r,a,{baseUrl:s,body:o,endpointName:i,headers:n,method:l,params:y,timeout:p}=t,f=void 0!==y?new URLSearchParams(Object.entries(y).flatMap(e=>{let[t,r]=e;return Array.isArray(r)?r.map(e=>[t,String(e)]):null!==r?[[t,String(r)]]:[]})).toString():"",w="".concat(s||this.options.baseUrl).concat(e).concat(f?"?".concat(f):""),g={...this.defaultHeaders,...n},v=void 0===o?o:JSON.stringify(o),R=!1,C=this.timeoutRetryDecayManager?this.timeoutRetryDecayManager.getDecayFactor(w,y):1,b=(void 0!==p?p:"GET"===l?void 0===this.options.readTimeout?2e4:this.options.readTimeout:void 0===this.options.mutateTimeout?2e4:this.options.mutateTimeout)*C;function T(t){let{originalError:s,isHandled:o,isOffline:n=!1}=t;return{absoluteUrl:w,body:v,endpointName:i,error:s,hasTimedOut:R,isHandled:o,message:d(s)?s.message:s?String(s):"Farcaster API Client experienced an unexpected error.",isNetworkError:!!(s&&d(s))&&"TypeError"===s.name&&"string"==typeof s.message&&("Load failed"===s.message?void 0===s.stack:c.has(s.message)),method:l,relativeUrl:e,resolvedTimeout:b,response:r,responseData:a,status:null==r?void 0:r.status,timeout:p,isOffline:n}}function E(){return{absoluteUrl:w,body:v,endpointName:i,method:l,relativeUrl:e}}if(this.options.checkOffline){let e=await this.options.checkOffline();if(e)throw new u(T({originalError:"Offline",isHandled:!1,isOffline:e}))}let S=new AbortController,x=Date.now(),F=b?setTimeout(()=>{this.options.onTimeout&&this.options.onTimeout({requestInfo:E(),timeSinceRequestStart:Date.now()-x}),R=!0,S.abort()},b):void 0;try{let e=this.options.fetch||m;if(!e)throw Error("Failed to find a resolved fetch method to make requests");this.options.onFetchStart&&this.options.onFetchStart({requestInfo:E()});let t=((r=await e(w,{body:v,headers:g,method:l,signal:S.signal})).headers.get("content-type")||"application/json; charset=utf-8").toLowerCase().includes("json")?await r.json():await r.text();if(r.status>=400){let e="".concat(i," ").concat(r.status," - ").concat(t.errors.map(e=>e.message).join(","));throw new h({...T({originalError:e,isHandled:!0}),responseData:t,status:r.status})}return this.options.onSuccess&&this.options.onSuccess({requestInfo:E(),responseData:t,responseStatus:r.status}),{data:t,status:r.status}}catch(t){let e=new u(T({originalError:t,isHandled:!1}));throw this.options.onError&&this.options.onError({error:e,requestInfo:E(),responseStatus:null==r?void 0:r.status}),e}finally{clearTimeout(F)}}get baseUrl(){return this.options.baseUrl}async authedGet(e,t){let{headers:r,...a}=t;return this.fetch(e,{...a,method:"GET",headers:await this.authorize(r)})}async get(e,t){return this.fetch(e,{...t,method:"GET"})}async patch(e,t){let{headers:r,...a}=t;return this.fetch(e,{...a,method:"PATCH",headers:await this.authorize(r,!0)})}async post(e,t){let{headers:r,...a}=t;return this.fetch(e,{...a,method:"POST",headers:await this.authorize(r,!0)})}async put(e,t){let{headers:r,...a}=t;return this.fetch(e,{...a,method:"PUT",headers:await this.authorize(r,!0)})}async delete(e,t){let{headers:r,...a}=t;return this.fetch(e,{...a,method:"DELETE",headers:await this.authorize(r,!0)})}async authorize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{Authorization:r}=e;if(!r&&this.options.getAuthToken){let e=await this.options.getAuthToken();e&&(r="Bearer ".concat(e.secret))}let a={...e,Authorization:r};return t&&(a["Idempotency-Key"]=p()),a}constructor(e={}){for(let t in this.options=n({defaults:y(),options:e}),this.timeoutRetryDecayManager=e.timeoutRetryDecayFactor?new f(e.timeoutRetryDecayFactor):void 0,this.defaultHeaders={"Content-Type":"application/json; charset=utf-8"},this.defaultHeaders)""===this.defaultHeaders[t]&&delete this.defaultHeaders[t]}}class g extends w{getCreatorRewardsLeaderboard(e){let{headers:t,timeout:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.authedGet("/v1/creator-rewards-leaderboard",{headers:t,timeout:r,endpointName:"getCreatorRewardsLeaderboard",params:e})}getCreatorRewardsMetadata(){let{headers:e,timeout:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.authedGet("/v1/creator-rewards-metadata",{headers:e,timeout:t,endpointName:"getCreatorRewardsMetadata"})}getCreatorRewardsForUser(e){let{headers:t,timeout:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.authedGet("/v1/creator-rewards-scores-for-user",{headers:t,timeout:r,endpointName:"getCreatorRewardsForUser",params:e})}getCreatorRewardsEarningsHistory(e){let{headers:t,timeout:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.authedGet("/v1/creator-rewards-earnings-history",{headers:t,timeout:r,endpointName:"getCreatorRewardsEarningsHistory",params:e})}getCreatorRewardsPeriodSummary(e){let{headers:t,timeout:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.authedGet("/v1/creator-rewards-period-summary",{headers:t,timeout:r,endpointName:"getCreatorRewardsPeriodSummary",params:e})}}let v=new g;function R(e){var t;if(e&&(null===(t=e.next)||void 0===t?void 0:t.cursor))return e.next.cursor}let C=()=>{let e=(0,a.jE)();return(0,i.useCallback)(()=>e.prefetchQuery({queryKey:["creatorRewardsMetadata"],queryFn:async()=>(await v.getCreatorRewardsMetadata()).data}),[e])},b=()=>{let e=(0,a.jE)();return(0,i.useCallback)(t=>{let{fid:r}=t;return e.prefetchQuery({queryKey:["creatorReward",r],queryFn:async()=>(await v.getCreatorRewardsForUser({fid:r})).data})},[e])},T=()=>{let e=(0,a.jE)();return(0,i.useCallback)(()=>e.prefetchInfiniteQuery({queryKey:["creatorRewardsLeaderboard"],queryFn:async()=>(await v.getCreatorRewardsLeaderboard({limit:30})).data,initialPageParam:void 0}),[e])},E=()=>{let e=(0,a.jE)();return(0,i.useCallback)(t=>{let{fid:r}=t;return e.prefetchQuery({queryKey:["creatorRewardsPeriodSummary",r],queryFn:async()=>(await v.getCreatorRewardsPeriodSummary({fid:r})).data})},[e])},S=()=>(0,s.U)({queryKey:["creatorRewardsMetadata"],queryFn:async()=>(await v.getCreatorRewardsMetadata()).data}),x=()=>(0,o.q)({queryKey:["creatorRewardsLeaderboard"],queryFn:async e=>{let{pageParam:t}=e;return(await v.getCreatorRewardsLeaderboard(void 0!==t?{cursor:t,limit:30}:{limit:30})).data},initialPageParam:void 0,getNextPageParam:R}),F=e=>{let{fid:t}=e;return(0,s.U)({queryKey:["creatorReward",t],queryFn:async()=>(await v.getCreatorRewardsForUser({fid:t})).data})},q=e=>{let{fid:t}=e;return(0,s.U)({queryKey:["creatorRewardsPeriodSummary",t],queryFn:async()=>(await v.getCreatorRewardsPeriodSummary({fid:t})).data})}},4678:(e,t,r)=>{r.d(t,{u:()=>u,w:()=>l});var a=r(5155),s=r(5759),o=r(2115),i=r(4863),n=r(4530);let c=void 0,d=o.createContext([]);function l(e){let{children:t}=e,[r,l]=o.useState(!1),{dismiss:u}=(0,n.Q)(),[h,m]=o.useState(c),y=o.useCallback(async()=>{let e=await s.Ay.context;null!=e&&void 0===h?m(e):l(!0),u()},[u,h]);return(o.useEffect(()=>{void 0===h&&y()},[y,h]),r||void 0===h)?(0,a.jsx)(i.R,{}):(0,a.jsx)(d.Provider,{value:{fid:h.user.fid,pfpUrl:h.user.pfpUrl},children:t})}let u=()=>o.useContext(d)},4530:(e,t,r)=>{r.d(t,{C:()=>n,Q:()=>c});var a=r(5155),s=r(5759),o=r(2115);let i=o.createContext([]);function n(e){let{children:t}=e,r=o.useCallback(async()=>{s.Ay.actions.ready({disableNativeGestures:!1})},[]);return(0,a.jsx)(i.Provider,{value:{dismiss:r},children:t})}let c=()=>o.useContext(i)}}]);